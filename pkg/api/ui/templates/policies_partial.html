{{if .Policies}}
<div class="policies-grid">
    {{range .Policies}}
    <div class="policy-card {{if not .Enabled}}policy-disabled{{end}}">
        <div class="policy-header">
            <div class="policy-title">
                <h3>{{.Name}}</h3>
                <span class="badge badge-{{.Action | lower}}">{{.Action}}</span>
            </div>
            <div class="policy-actions">
                <label class="toggle-switch">
                    <input type="checkbox" {{if .Enabled}}checked{{end}}
                           onchange="togglePolicy({{.ID}}, this.checked)">
                    <span class="toggle-slider"></span>
                </label>
            </div>
        </div>

        <div class="policy-logic">
            <code>{{.Logic}}</code>
        </div>

        {{if .ActionData}}
        <div class="policy-action-data">
            <strong>Action Data:</strong> <code>{{.ActionData}}</code>
        </div>
        {{end}}

        <div class="policy-footer">
            <button class="btn-icon" onclick='showEditPolicyModal({{. | json}})' title="Edit">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M16.862 3.487a2.25 2.25 0 0 1 3.182 3.182L8.69 18.023a4.5 4.5 0 0 1-1.897 1.12l-3.41 0.977 0.978-3.41a4.5 4.5 0 0 1 1.12-1.897L16.862 3.487z"></path>
                    <path d="M15 6l3 3"></path>
                </svg>
                <span>Edit</span>
            </button>
            <button class="btn-icon btn-danger" onclick="deletePolicy({{.ID}})" title="Delete">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M6 7h12"></path>
                    <path d="M9 7V5a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"></path>
                    <path d="M10 11v6m4-6v6"></path>
                    <path d="M5 7l1 13a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2l1-13"></path>
                </svg>
                <span>Delete</span>
            </button>
        </div>
    </div>
    {{end}}
</div>
{{else}}
<div class="empty-state">
    <p>No policies configured yet.</p>
    <p>Policies allow you to create advanced filtering rules based on time, client IP, and domain patterns.</p>
    <button class="btn btn-primary" onclick="showAddPolicyModal()">Create Your First Policy</button>
</div>
{{end}}
