apiVersion: v1
kind: ConfigMap
metadata:
  name: glory-hole-config
data:
  config.yml: |
    server:
      listen_address: ":53"
      tcp_enabled: true
      udp_enabled: true
      web_ui_address: ":8080"
      decision_trace: false

    upstream_dns_servers:
      - "1.1.1.1:53"
      - "8.8.8.8:53"

    update_interval: "24h"
    auto_update_blocklists: true

    blocklists:
      - "https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts"

    whitelist: []

    local_records:
      enabled: false
      records: []

    policy:
      enabled: false
      rules: []

    cache:
      enabled: true
      max_entries: 10000
      min_ttl: "1m"
      max_ttl: "24h"
      negative_ttl: "5m"

    database:
      enabled: true
      backend: "sqlite"
      sqlite:
        path: "/data/glory-hole.db"
        wal_mode: true
      buffer_size: 1000
      flush_interval: "5s"
      retention_days: 7

    telemetry:
      enabled: true
      service_name: "glory-hole"
      service_version: "latest"
      prometheus_enabled: true
      prometheus_port: 9090
      tracing_enabled: false
